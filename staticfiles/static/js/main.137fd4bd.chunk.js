(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{334:function(e,t,n){},335:function(e,t,n){},341:function(e,t,n){},342:function(e,t,n){},343:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),o=n(5),r=n.n(o),i=(n(90),n(21)),c=n(22),l=n(26),d=n(37),u=n(35),m=n(4),p=n(23),h=n.n(p),j=n(31),b=n(30),g=n.n(b),_=n(6),f=n.n(_),v=n(52),O=n(67),x=n(66);v.b.add(x.a,O.a);var y=Object(v.a)({prefix:"fab",iconName:"google"}).html,w=n(369),N=n(1);function S(e){var t=e.code,n=e.language;e.self;return Object(N.jsx)(w.a,{language:n,children:t})}function k(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var s=n[a].trim();if(s.substring(0,e.length+1)===e+"="){t=decodeURIComponent(s.substring(e.length+1));break}}return t}function C(e,t,n){var a=t.id,s=document.querySelector("#"+e),o=document.createElement("div");o.setAttribute("class","left_message_container");var i=document.createElement("h4");i.setAttribute("class","message_username"),i.setAttribute("align","center"),i.innerHTML='<span id="username">'+n+"</span>",f()(o).append(i),f()(o).append('<button id="google_search_button" class="message_buttons" value=\''.concat(t.message,"'\">").concat(y," Search on Google</button>")),f()(o).append('<button id="copy_message_button" class="message_buttons" value=\''.concat(t.message,"'\"> Copy </button>"));var c=document.createElement("p");c.setAttribute("class","left_message"),null!=a&&c.setAttribute("id","message_"+a),t.iscode?(c.classList.add("code_message"),f()(o).append(c),s.appendChild(o),r.a.render(Object(N.jsx)(S,{language:"cpp",code:t.message,self:c}),c)):(c.innerText=t.message,f()(o).append(c),s.appendChild(o))}function L(e,t,n){var a=t.id,s=document.querySelector("#"+e),o=document.createElement("div");o.setAttribute("class","right_message_container");var i=document.createElement("h4");i.setAttribute("class","message_username"),i.setAttribute("align","center"),i.innerHTML='<span id="username">'+n+"</span>",f()(o).append(i),f()(o).append('<button class="message_buttons google_search_button" value=\''.concat(t.message,"'\">").concat(y," Search on Google</button>")),f()(o).append('<button class="message_buttons copy_message_button" value=\''.concat(t.message,"'\"> Copy </button>"));var c=document.createElement("p");c.setAttribute("class","right_message"),null!=a&&c.setAttribute("id","message_"+a),console.log(t),t.iscode?(c.classList.add("code_message"),f()(o).append(c),s.appendChild(o),r.a.render(Object(N.jsx)(S,{language:"cpp",code:t.message,self:c}),c)):(c.innerText=t.message,f()(o).append(c),s.appendChild(o))}function I(e){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){console.log("Async: Copying to clipboard was successful!")}),(function(e){console.error("Async: Could not copy text: ",e)})):function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var n=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+n)}catch(a){console.error("Fallback: Oops, unable to copy",a)}document.body.removeChild(t)}(e)}var E=window.location.protocol,U="http:"==E?"ws://":"wss://",R="localhost:3000"==window.location.host?"127.0.0.1:8000":window.location.host,F=E+"//"+R,T=U+R+"/chatroom/ws/";k("csrftoken"),n(72);function D(e,t){var n=new FileReader;n.onload=function(){var e=n.result;t(e)},n.readAsDataURL(e)}function P(){return(P=Object(j.a)(h.a.mark((function e(t,n,a){var s,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=document.getElementById(t),o=document.getElementById(n),f()(s).off(),f()(s).on("dragover",(function(e){e.preventDefault(),s.classList.add("dropzone__over")})),["dragleave","dragend"].forEach((function(e){f()(s).on(e,(function(e){s.classList.remove("dropzone__over")}))})),f()(s).on("drop",(function(e){e.preventDefault();var t=e.originalEvent.dataTransfer.files;t.length&&o&&(o.files=t,console.log(s,o,t),a(s,t[0])),s.classList.remove("dropzone__over")}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(){function e(t,n){Object(i.a)(this,e),this.username=t,this.password=n,this.method=null,this.data={},this.body={},this.headers={"Content-Type":"application/json","x-csrftoken":k("csrftoken")}}return Object(c.a)(e,[{key:"setData",value:function(e){this.data=e}},{key:"setBody",value:function(e){this.body=e}},{key:"setMethod",value:function(e){this.method=e}},{key:"setHeaders",value:function(e){this.headers=e}},{key:"makeRequest",value:function(e){var t=this;return t.method&&e&&t.username&&t.password?new Promise((function(n,a){g()({method:t.method,url:F+e,headers:t.headers,data:t.data,auth:{username:t.username,password:t.password},body:t.body}).then((function(e){n(e)})).catch((function(e){a(e)}))})):new Promise((function(e,t){t("method, url, data, username and password required")}))}}]),e}(),M=function(){function e(t){Object(i.a)(this,e),this.ws_protocol=U,this.hostname=R,this.api_url=F+"/",this.client=t,this.username=null,this.roomname=null,this.user=null,this.active_users=[],this.is_group=!1}return Object(c.a)(e,[{key:"set_is_group",value:function(e){this.is_group=e}},{key:"is_group",value:function(){return this.is_group}},{key:"fetch_messages",value:function(){return!!(this.client&&this.username&&this.password)&&(this.send_message_to_room("fetch_messages",""),!0)}},{key:"update_message",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{command:"update_message",current_message:null,updated_message:null,id:null,username:null,roomname:null};1==this.is_group&&(e.group_id=this.roomname),this.client.send(JSON.stringify(e))}},{key:"send_file_to_group",value:function(e,t,n){var a=this.client,s=this.username,o=this.roomname,r={command:"new_file",filename:e.name,username:s,roomname:o,id:Date.now().toString()};this.is_group&&(r.group_id=this.roomname),e.name.endsWith(".pdf")||e.name.endsWith(".PDF")?function(e,t){var n=e,a=new FileReader;a.onload=function(e){var n=e.target.result;t(n)},a.readAsDataURL(n)}(e,(function(e){r.dataURL=e,a.send(JSON.stringify(r)),console.log(r),n(!0)})):(r.description=t,D(e,(function(e){r.dataURL=e,a.send(JSON.stringify(r)),console.log(r),n(!0)})))}},{key:"update_active_users",value:function(){var e=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.send_message_to_room("get_active_users",{});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send_image_text",value:function(e,t,n){var a=window.Tesseract,s=this;a.recognize(e).progress((function(e){t(Math.round(100*e.progress))})).then((function(e){s.send_message_to_room("new_message",e.text),n(!0)})).catch((function(e){n(!1)}))}},{key:"send_message_to_room",value:function(e,t){1==this.is_group?this.send_message_to_group(e,t):this.client.send(JSON.stringify({command:e,message:t,username:this.username,roomname:this.roomname}))}},{key:"send_message_to_group",value:function(e,t){this.client.send(JSON.stringify({command:e,message:t,username:this.username,roomname:this.roomname,group_id:this.roomname}))}},{key:"clear_room_messages",value:function(e){this.client.send(JSON.stringify({command:"clear_room_messages",username:this.username,roomname:this.roomname,password:e}))}},{key:"get_token",value:function(){var e=null,t="csrftoken";if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var s=n[a].trim();if(s.substring(0,t.length+1)==t+"="){e=decodeURIComponent(s.substring(t.length+1));break}}return e}},{key:"get_client",value:function(){return this.client}},{key:"get_messages",value:function(){return this.messages}},{key:"get_response",value:function(){return this.response}},{key:"get_room_messages",value:function(e){var t=[];return this.messages.map((function(n){n.roomname===e&&t.push(n)})),t}},{key:"get_answered_messages",value:function(){var e=[];return this.messages.map((function(t){!0===t.isanswer&&e.push(t)})),e}},{key:"set_roomname",value:function(e){this.roomname=e}},{key:"set_username",value:function(e){this.username=e}},{key:"set_password",value:function(e){this.password=e}},{key:"set_user",value:function(e){this.user=e}},{key:"get_user",value:function(){return this.user}},{key:"get_roomname",value:function(){return this.roomname}},{key:"get_username",value:function(){return this.username}},{key:"get_hostnmae",value:function(){return this.hostname}},{key:"get_ws_protocol",value:function(){return this.ws_protocol}},{key:"close_connection",value:function(){this.client.close()}}]),e}(),B=n(8),q=n(33),z=n(362),H=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).boxName=a.props.boxName,a}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this;if("image_to_text_box"==this.boxName)e=Object(N.jsx)("div",{className:"image_to_text_box",children:Object(N.jsxs)("form",{id:"image_to_text_form",children:[Object(N.jsxs)("div",{children:[Object(N.jsx)("input",{className:"image_to_text_inputs",id:"convert_to_text",name:"convert_to_text",type:"checkbox"}),Object(N.jsx)("label",{htmlFor:"convert_to_text",children:"Convert To Text"})]}),Object(N.jsxs)("div",{children:[Object(N.jsx)("input",{className:"image_to_text_inputs",id:"direct_upload",name:"direct_upload",type:"checkbox"}),Object(N.jsx)("label",{htmlFor:"upload_direct",children:"Direct Upload"})]}),Object(N.jsxs)("div",{className:"image_to_text_description",children:[Object(N.jsx)("p",{children:"Image Description"}),Object(N.jsx)("textarea",{className:"image_to_text_textarea",id:"image_description",placeholder:"Enter Image Description here",cols:"50"})]}),Object(N.jsxs)("div",{children:[Object(N.jsx)("button",{id:"upload_button",className:"image_to_text_button",type:"submit",value:"upload",onClick:function(e){return t.props.handler(e,{button:"upload"})},children:"Upload"}),Object(N.jsx)("button",{id:"cancel_button",className:"image_to_text_button",type:"submit",value:"cancel",onClick:function(e){return t.props.handler(e,{button:"cancel"})},children:"Cancel"})]})]})});else if("progress_box"==this.boxName)e=Object(N.jsxs)("div",{className:"progress_box",children:[Object(N.jsxs)("h2",{id:"progress_box_heading",align:"center",children:[this.props.text," (",this.props.progress+"%",")"]}),Object(N.jsx)("div",{className:"progress_line",style:{width:this.props.progress+"%"}})]});else if("logout_box"==this.boxName)e=Object(N.jsx)("div",{className:"logout_box",children:Object(N.jsx)("button",{id:"logout_button",onClick:this.props.logoutHandler,children:"Logout"})});else if("error_box"==this.boxName)e=this.props.hidden?Object(N.jsx)("div",{}):Object(N.jsx)("div",{className:"error_box",children:Object(N.jsxs)("p",{className:"error_box_message",children:[Object(N.jsx)("span",{children:Object(N.jsx)(q.a,{size:25})}),this.props.error_message]})});else{if("loader"==this.boxName)return this.props.hidden?Object(N.jsx)("div",{children:" "}):Object(N.jsxs)("div",{className:"absolute_center",children:[Object(N.jsx)(z.a,{size:70}),Object(N.jsx)("h2",{children:this.props.message?this.props.message:"Please Wait Loading"})]});if("info_box"==this.boxName){var n=this.props.content,a=this.props.title,s=this.props.textColor;e=Object(N.jsxs)("div",{id:"info_box",className:"info_box",children:[Object(N.jsx)("h3",{children:a}),Object(N.jsx)("p",{style:{color:s},children:n})]})}}return Object(N.jsx)(N.Fragment,{children:e})}}]),n}(a.Component),G=n(45),J=n(77),W=n(25),Y=n(20),Q=function(e){return{type:"UpdateLoading",payload:e}},V=function(e){var t=e.rooms_data,n=e.groups_data,a=[];return n.map((function(e){e.is_group=!0,a.push(e)})),t.map((function(e){e.is_group=!1,a.push(e)})),{type:"UpdateRooms",payload:a}},X=function(e){return{type:"UpdateUser",payload:e}},Z=n(38),K={rooms:[],loading:!1,error:null,message_api:null},$=Object(Z.b)({username:"",password:"",user:null},(function(e){e.addCase("UpdateUsername",(function(e,t){e.username=t.payload})),e.addCase("UpdatePassword",(function(e,t){e.password=t.payload})),e.addCase("UpdateUser",(function(e,t){e.user=t.payload}))})),ee=Object(Z.b)(K,(function(e){e.addCase("UpdateRooms",(function(e,t){e.rooms=t.payload})),e.addCase("UpdateLoading",(function(e,t){e.loading=t.payload})),e.addCase("UpdateError",(function(e,t){e.error=t.payload})),e.addCase("UpdateState",(function(e,t){e.state=t.payload})),e.addCase("UpdateMessageApi",(function(e,t){e.message_api=t.payload}))})),te=Object(Z.b)({loading:!1,currentRoom:null},(function(e){e.addCase("UpdateRoomLoading",(function(e,t){e.roomLoading=t.payload})),e.addCase("UpdateCurrentRoom",(function(e,t){e.currentRoom=t.payload}))})),ne=Object(Y.b)({roomNavState:ee,roomState:te,userData:$}),ae=Object(Z.a)({reducer:ne,preloadedState:K});function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",content:"",color:"",time:0},t=e.title,n=e.content,a=e.textColor?e.textColor:e.color,s=e.time,o=document.getElementsByTagName("body")[0],i=document.createElement("div");o.appendChild(i),r.a.render(Object(N.jsx)(H,{boxName:"info_box",title:t,content:n,textColor:a||""}),i),setTimeout((function(){r.a.unmountComponentAtNode(i),i.remove()}),1e3*s)}function oe(e){var t=e.self,n=document.getElementById("root"),s=Object(B.c)(),o=Object(B.d)((function(e){return e.userData})),i=Object(a.useState)(!1),c=Object(m.a)(i,2),l=c[0],d=c[1],u=Object(a.useState)(!1),p=Object(m.a)(u,2),h=p[0],j=p[1],b=Object(a.useState)(""),g=Object(m.a)(b,2),_=g[0],f=g[1],v=Object(a.useState)([]),O=Object(m.a)(v,2),x=O[0],y=O[1],w=Object(a.useState)(""),S=Object(m.a)(w,2),k=S[0],C=S[1];function L(e){n.classList.remove("blur"),r.a.unmountComponentAtNode(t),t.remove()}return Object(a.useEffect)((function(){d(!0);var e=new A(o.username,o.password);e.setMethod("POST"),e.setData({username:k}),e.makeRequest("/api/chat/search_user/").then((function(e){var t=function(e){for(var t=[],n=0;n<e.length;n++)t.push(Object(N.jsxs)("div",{id:"user_"+e[n].id,className:"create_room_profileview user_profile_container",onClick:function(e){j(!0),f(e.target.id)},children:[Object(N.jsx)("div",{className:"create_room_profileview__image user_profile__image",children:Object(N.jsx)("img",{src:null!=e[n].pic&&""!=e[n].pic?F+e[n].pic:"https://www.kindpng.com/picc/m/24-248253_user-profile-default-image-png-clipart-png-download.png"})}),Object(N.jsx)("p",{id:"user_"+e[n].id,className:"create_room_profileview__p user_profile__p",children:e[n].name})]},"user_"+e[n].id));return t}(e.data.data);y(t),d(!1)})).catch((function(e){d(!1)}))}),[k]),Object(N.jsxs)(N.Fragment,{children:[n.classList.add("blur"),Object(N.jsx)("div",{className:"update_profile__cancel",onClick:L,children:Object(N.jsx)(W.a,{})}),h?Object(N.jsxs)("div",{children:[Object(N.jsxs)("form",{className:"create_room__form",onSubmit:function(e){d(!0),e.preventDefault();var t=e.target.room_image.files[0],n=e.target.room_name.value,a=_;console.log(t),a=a.substring(5,_.length),a=parseInt(a);var r=new FormData;r.append("room_name",n),r.append("user2_id",a),r.append("room_image",t);var i=new A(o.username,o.password);i.setMethod("POST"),i.setData(r),i.setHeaders({"Content-Type":"multipart/form-data"}),i.makeRequest("/api/chat/command/create_room/").then((function(e){var t=e.data;1==t.status?(s(V(t.data)),d(!1),se({title:"Room",content:"Room created successfully",color:"green",time:4}),L()):(se({title:"Room",content:t.error,color:"red",time:4}),d(!1))})),e.preventDefault()},children:[Object(N.jsx)("label",{htmlFor:"input_room_name",children:"Enter Room Name"}),Object(N.jsx)("input",{className:"create_room__form__input",name:"room_name",id:"input_room_name",type:"text",placeholder:"Enter room name ..."}),Object(N.jsx)("label",{htmlFor:"input_room_image",children:"Select Room Picture"}),Object(N.jsx)("input",{id:"input_room_image",className:"create_room__form__input",accept:"image/*",name:"room_image",type:"file"}),Object(N.jsx)("input",{className:"create_room__form__button",type:"submit",value:"Create Room"})]}),l?Object(N.jsx)("div",{className:"flex_center_row",children:Object(N.jsx)(z.a,{})}):null]}):Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:"user_search_container",children:Object(N.jsx)("input",{id:"user_search__input",type:"text",placeholder:"Search for users..",value:k,onChange:function(e){C(e.target.value)}})}),l?Object(N.jsx)("div",{className:"flex_center_row",children:Object(N.jsx)(z.a,{})}):Object(N.jsx)("div",{className:"user_search__list",children:x})]})]})}function re(e){var t=e.user,n=e.self,s=document.getElementById("root"),o=Object(B.c)(),i=Object(a.useState)(!1),c=Object(m.a)(i,2),l=c[0],d=c[1],u=Object(a.useState)(""),p=Object(m.a)(u,2),h=p[0],j=p[1],b=Object(a.useState)(""),g=Object(m.a)(b,2),_=g[0],f=g[1],v=Object(a.useState)(""),O=Object(m.a)(v,2),x=O[0],y=O[1],w=Object(a.useState)(null),S=Object(m.a)(w,2),k=S[0],C=S[1];function L(e){s.classList.remove("blur"),r.a.unmountComponentAtNode(n),n.remove()}return Object(a.useEffect)((function(){var e=ae.getState().userData;j(e.username),f(e.password)}),[]),Object(N.jsxs)(N.Fragment,{children:[s.classList.add("blur"),Object(N.jsx)("div",{className:"update_profile__cancel",onClick:L,children:Object(N.jsx)(W.a,{})}),Object(N.jsxs)("div",{className:"update_profile__header",children:[Object(N.jsx)("img",{src:t.pic?F+t.pic:"https://www.kindpng.com/picc/m/24-248253_user-profile-default-image-png-clipart-png-download.png"}),Object(N.jsx)("h3",{align:"center",children:t.name}),Object(N.jsx)("button",{className:"update_profile__header_button",onClick:function(e){localStorage.removeItem("username"),localStorage.removeItem("password"),window.location.reload()},children:"Logout"})]}),Object(N.jsxs)("form",{className:"update_profile__form",onSubmit:function(e){if(d(!0),x||k){var t=new FormData;t.append("newname",x),t.append("pic",k);var n=new A(h,_);n.setMethod("post"),n.setData(t),n.makeRequest("/api/chat/user/updateprofile/").then((function(t){var n=t.data;1==n.status?(se({title:"Profile",content:"Profile Updated Successfully",time:2,textColor:"green"}),o(X(n.data.user)),L(e)):se({title:"Failed",content:"Failed to Update",time:2,textColor:"red"}),d(!1)}))}else alert("You can't leave any field empty");e.preventDefault()},children:[Object(N.jsx)("input",{id:"user_name_input"+t.id,placeholder:"Enter new name...",name:"username",value:x,onChange:function(e){return y(e.target.value)}}),Object(N.jsx)("label",{for:"user_pic_input"+t.id,children:"Edit Profile Picture"}),Object(N.jsx)("input",{id:"user_pic_input"+t.id,type:"file",name:"picture",onChange:function(e){return C(e.target.files[0])}}),Object(N.jsx)("input",{type:"submit",value:"Update"})]}),l?Object(N.jsx)("div",{className:"flex_center_row",children:Object(N.jsx)(z.a,{size:50})}):null]})}function ie(e){var t=Object(B.d)((function(e){return e.userData})),n=t.user,a=t.username;return n?Object(N.jsxs)("div",{className:"user_profile_container",children:[Object(N.jsx)("div",{className:"user_profile__image",onClick:function(e){var t=document.createElement("div");t.id="update_profile_"+n.id,t.classList.add("absolute_center"),document.body.appendChild(t),r.a.render(Object(N.jsx)(B.a,{store:ae,children:Object(N.jsx)(re,{self:t,user:n})}),t),t.classList.add("update_profile_container")},children:Object(N.jsx)("img",{id:"user_image_"+n.id,src:null!=n.pic&&""!=n.pic?F+n.pic:"https://www.kindpng.com/picc/m/24-248253_user-profile-default-image-png-clipart-png-download.png"})}),Object(N.jsxs)("div",{children:[Object(N.jsx)("p",{className:"user_profile__p",children:n.name}),Object(N.jsx)("p",{children:a})]}),Object(N.jsx)("div",{className:"user_profile__addroom",onClick:function(e){var t=document.createElement("div");t.id="create_roomm_"+n.id,t.classList.add("absolute_center"),document.body.appendChild(t),r.a.render(Object(N.jsx)(B.a,{store:ae,children:Object(N.jsx)(oe,{self:t,user:n})}),t),t.classList.add("create_room_container")},children:Object(N.jsx)(G.a,{size:20})})]}):Object(N.jsx)("h2",{children:"No User Specified"})}function ce(e){var t=e.self,n=e.mode,s=e.heading;null!=s&&""!=s||(s="User List");var o=Object(B.d)((function(e){return e.userData})),i=Object(a.useState)([]),c=Object(m.a)(i,2),l=c[0],d=c[1],u=Object(a.useState)(!1),p=Object(m.a)(u,2),h=p[0],j=p[1],b=Object(a.useState)(""),g=Object(m.a)(b,2),_=g[0],f=g[1],v=Object(a.useState)([]),O=Object(m.a)(v,2),x=O[0],y=O[1];function w(){r.a.unmountComponentAtNode(t),t.remove()}function S(e){for(var t=[],n=0;n<e.length;n++)t.push(Object(N.jsxs)("div",{id:"user_"+e[n].id,className:-1==x.indexOf(e[n].id)?"create_room_profileview user_profile_container":"create_room_profileview user_profile_container black",onClick:function(e){var t=x,n=t.indexOf(e.target.id);-1!=n?(t.splice(n,1),e.target.style.color="black"):(e.target.style.color="green",t.push(e.target.id)),y(t)},children:[Object(N.jsx)("div",{className:"create_room_profileview__image user_profile__image",children:Object(N.jsx)("img",{src:null!=e[n].pic&&""!=e[n].pic?F+e[n].pic:"https://www.kindpng.com/picc/m/24-248253_user-profile-default-image-png-clipart-png-download.png"})}),Object(N.jsx)("p",{id:"user_"+e[n].id,className:"create_room_profileview__p user_profile__p",children:e[n].name})]},"user_"+e[n].id));return t}return Object(a.useEffect)((function(){var t=new A(o.username,o.password);if("add_users"==n||"remove_users"==n||"add_user"==n||"remove_user"==n)j(!0),t.setMethod("POST"),t.setData({username:_}),t.makeRequest("/api/chat/search_user/").then((function(e){var t=S(e.data.data);d(t),j(!1)})).catch((function(e){j(!1)}));else if("show_users"==n){j(!0);var a=new A(o.username,o.password);a.setMethod("POST"),e.group_id?a.setData({group_id:e.group_id}):e.room_id&&a.setData({room_id:e.room_id}),a.makeRequest("/api/chat/command/get_users_by_group_id/").then((function(e){console.log(e.data);var t=S(e.data.data);d(t),j(!1)})).catch((function(e){j(!1)}))}}),[_]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h2",{align:"center",style:{color:"white",margin:"5px"},children:s}),Object(N.jsx)("div",{className:"update_profile__cancel",onClick:w,children:Object(N.jsx)(W.a,{})}),"add_users"==n||"remove_users"==n?Object(N.jsxs)("div",{className:"user_search_container",children:[Object(N.jsx)("input",{id:"user_search__input",type:"text",placeholder:"Search for users..",value:_,onChange:function(e){return f(e.target.value)}}),Object(N.jsx)("button",{onClick:function(){var n=t.id;n.startsWith("user_list_container_")&&(n=n.substring(20,n.length)),e.onComplete(x,n),w()},children:"Select Users"})]}):null,h?Object(N.jsx)("div",{className:"flex_center_row",children:Object(N.jsx)(z.a,{})}):Object(N.jsx)("div",{className:"user_search__list",children:l})]})}var le=n(46);function de(e){var t=e.src,n=e.image,a=e.self,s=e.height,o=e.width;return Object(N.jsxs)("div",{className:"image_view absolute_center",style:{width:o,height:s},children:[Object(N.jsx)("div",{className:"cancel_button",onClick:function(){r.a.unmountComponentAtNode(a),a.remove()},children:Object(N.jsx)(W.a,{})}),Object(N.jsx)("img",{src:n?n.src:t})]})}var ue=Object(B.b)((function(e){return{roomState:e.changeRoom}}))((function(e){var t=Object(B.c)(),n=Object(le.useMediaQuery)({query:"(max-width: 800px)"}),a=Object(B.d)((function(e){return e.userData})),s=Object(B.d)((function(e){return e.roomNavState}));function o(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"roomcard__image"!=e.target.className&&t({type:"UpdateCurrentRoom",payload:n||e.target.id})}function i(e,t){var n=new A(a.username,a.password);n.setMethod("POST"),n.setData({users:e,group_id:t}),n.makeRequest("/api/chat/command/remove_users_from_group/").then((function(e){var t=e.data;1==t.status?t.removed_users.length>0?se({title:"Users",content:"Selected Users Deleted Successfully",color:"green",time:5}):se({title:"Users",content:"Selected Users Not Exists In Group",color:"green",time:5}):se({title:"Users",content:t.error,color:"red",time:5})})).catch((function(e){se({title:"Users",content:"something wrong happened",color:"red",time:5})}))}function c(e,t){var n=new A(a.username,a.password);n.setMethod("POST"),n.setData({users:e,group_id:t}),n.makeRequest("/api/chat/command/add_users_to_group/").then((function(e){var t=e.data;1==t.status?t.added_users.length>0?se({title:"Users",content:"Selected Users Added Successfully",color:"green",time:5}):se({title:"Users",content:"Selected Users Already Exists In Group",color:"green",time:5}):se({title:"Users",content:t.error,color:"red",time:5})})).catch((function(e){se({title:"Users",content:e,color:"red",time:5})}))}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=document.getElementsByTagName("body")[0],s=document.createElement("div");s.id=n,s.className="user_list_container absolute_center flex_center_column",a.appendChild(s),"add_user"==t?r.a.render(Object(N.jsx)(B.a,{store:ae,children:Object(N.jsx)(ce,{heading:"Add Users To Group",mode:"add_users",onComplete:c,self:s})}),s):"remove_user"==t?r.a.render(Object(N.jsx)(B.a,{store:ae,children:Object(N.jsx)(ce,{heading:"Remove Users From Group",mode:"remove_users",onComplete:i,self:s})}),s):"show_group_users"==t&&r.a.render(Object(N.jsx)(B.a,{store:ae,children:Object(N.jsx)(ce,{heading:"List of Users in Group",mode:"show_users",group_id:n,self:s})}),s)}var d=[],u=s.rooms;if(!s.loading)for(var m=function(e){if(u[e].is_group)d.push(Object(N.jsxs)("div",{className:"roomcard group lightblue",children:[Object(N.jsxs)("div",{onClick:function(t){return o(t,"group_"+u[e].id)},children:[Object(N.jsx)("div",{className:"group_card_conntainer",children:Object(N.jsx)("img",{id:"group_card_image_"+u[e].id,src:null!=u[e].image&&""!=u[e].image?F+u[e].image:"https://www.kindpng.com/picc/m/24-248253_user-profile-default-image-png-clipart-png-download.png",className:"roomcard__image",onClick:function(t){return o(t,"group_"+u[e].id)}})}),Object(N.jsx)("p",{id:"group_"+u[e].id,className:"roomcard__p",children:u[e].group_name})]}),u[e].admin==a.user.id?Object(N.jsxs)("div",{id:u[e].id,className:"flex_center_column group_action_button_container",children:[Object(N.jsxs)("div",{id:u[e].id,className:"group_plus_user_icon group_action_button",onClick:function(t){return l(t,"add_user",u[e].id)},children:[n?null:"Add Users"," ",Object(N.jsx)(G.a,{size:20})]}),Object(N.jsxs)("div",{id:u[e].id,className:"group_delete_user_icon group_action_button",onClick:function(t){return l(t,"remove_user",u[e].id)},children:[n?null:"Delete Users"," ",Object(N.jsx)(J.a,{size:20})]}),Object(N.jsxs)("div",{id:u[e].id,className:"group_delete_user_icon group_action_button",onClick:function(t){return l(t,"show_group_users",u[e].id)},children:[n?null:"Show Users"," ",Object(N.jsx)(q.c,{size:20})]})]}):null]},"group_"+u[e].id));else{var t=a.user.id==u[e].user1.id?u[e].user2:u[e].user1;d.push(Object(N.jsxs)("div",{id:"room_card_container_"+u[e].id,className:"roomcard relative",onClick:function(t){return o(t,"room_"+u[e].id)},children:[Object(N.jsx)("div",{id:"room_"+u[e].id,className:"room_card_image_container",children:Object(N.jsx)("img",{src:null!=t.pic&&""!=t.pic?F+t.pic:"https://www.kindpng.com/picc/m/24-248253_user-profile-default-image-png-clipart-png-download.png",className:"roomcard__image",onClick:function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.createElement("div");n.class="relative",n.id="image_view_"+e.id,document.getElementsByTagName("body")[0].appendChild(n),r.a.render(Object(N.jsx)(de,{self:n,image:e||t}),n)}(e.target)}})}),Object(N.jsxs)("p",{id:"room_name_"+u[e].id,className:"roomcard__p",children:[u[e].room_name," "]}),Object(N.jsx)("p",{style:{position:"absolute",top:1,right:1,zIndex:1,fontSize:"20px",color:"green"},children:t.name})]},"room_card_container_"+u[e].id))}},p=0;p<u.length;p++)m(p);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"roomlistheader",children:Object(N.jsx)(ie,{})}),Object(N.jsx)("div",{className:"roomcontainer__list__searchbox",children:Object(N.jsx)("input",{placeholder:"Search room here...",className:"search_input",type:"text"})}),d]})})),me=n(364),pe=n(365),he=n(366),je=n(344),be=n(13),ge=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).message_api=a.props.message_api,a.id=a.props.id,a.src=a.props.src,a.state={isScaled:!1,content:a.props.content},a.image_container=f()("#image_container_"+a.id),a.handle_click=a.handle_click.bind(Object(l.a)(a)),a.handle_append_answer=a.handle_append_answer.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"show_scaled_image_view",value:function(e){var t=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"image_button_container",children:[Object(N.jsx)("button",{className:"image_buttons",onClick:this.handle_append_answer,children:"Append Answer"}),Object(N.jsx)("button",{className:"image_buttons",onClick:this.handle_click,children:"Close Image"})]}),Object(N.jsx)("img",{id:"scaled_image_"+this.id,src:this.src})]}),n=document.createElement("div");n.id="scaled_image_container_"+this.id,n.className="show_scaled_image",f()("body").append(n),this.setState({scaledContainer:n}),r.a.render(t,n),this.setState({isScaled:!0})}},{key:"remove_scaled_image_view",value:function(e){document.getElementById("scaled_image_container_"+this.id).remove(),this.setState({isScaled:!1})}},{key:"handle_click",value:function(e){var t=document.getElementById("QuestionViewContainer");this.state.isScaled?(this.setState({isScaled:!1}),this.remove_scaled_image_view(t)):this.show_scaled_image_view(t)}},{key:"handle_append_answer",value:function(e){var t=window.prompt("Enter Answer :");if(null!=t&&""!=t){var n={id:"image_"+this.id,message:t,username:this.message_api.get_username(),roomname:this.message_api.get_roomname()};this.message_api.send_message_to_room("image_answer",n),this.remove_scaled_image_view()}}},{key:"render",value:function(){var e=this.props.classes,t=this.state.content;return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(me.a,{title:this.message_api.get_username(),className:e.root,children:[Object(N.jsx)(pe.a,{src:this.src,children:Object(N.jsx)(je.a,{variant:"outlined",children:Object(N.jsx)("img",{id:"image_"+this.id,src:this.src,className:"show_image",onClick:this.handle_click})})}),null!=t?Object(N.jsx)(he.a,{children:t}):null]})})}}]),n}(a.Component),_e=Object(be.a)({root:{},media:{width:400,height:300,paddingTop:"10%"}})(ge),fe=n(11),ve=n.n(fe),Oe=n(367);function xe(e){var t=e.file,n=e.filename,s=e.url,o=e.dataURL,r=Object(a.useState)(0),i=Object(m.a)(r,2),c=i[0],l=i[1],d=Object(a.useState)(null),u=Object(m.a)(d,2),p=u[0],h=u[1],j=Object(a.useState)(!1),b=Object(m.a)(j,2),g=b[0],_=b[1],f=Object(a.useState)(""),v=Object(m.a)(f,2),O=v[0],x=v[1];return t?(function(e){_(!0);var t=new FileReader;t.onload=function(e){var t=e.target.result;x(t),h(!1),_(!1)},t.onerror=function(){h(t.error),_(!1)},t.onprogress=function(e){if(e.lengthComputable){var t=parseInt(e.loaded/e.total*100,10);l(t)}},t.readAsDataURL(e)}(t),Object(N.jsx)(N.Fragment,{children:g?Object(N.jsx)("div",{className:"file_reading_progress",children:Object(N.jsx)(Oe.a,{variant:"determinate",value:c})}):Object(N.jsx)(N.Fragment,{children:p?Object(N.jsx)("div",{children:alert(p)}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"file__header",children:Object(N.jsx)("h3",{align:"center"})}),Object(N.jsx)("a",{className:"file__link",href:O,download:!0,children:"Download File"})]})})})):s&&n?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"file__header",children:Object(N.jsx)("h3",{align:"center"})}),Object(N.jsx)("a",{className:"file__link",href:F+s,download:!0,children:"Download File"})]}):o&&n?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"file__header",children:Object(N.jsx)("h3",{align:"center",children:n})}),Object(N.jsx)("a",{className:"file__link",href:o,download:!0,children:"Download File"})]}):Object(N.jsxs)("div",{children:[Object(N.jsx)("h3",{children:"No File Recieved"}),Object(N.jsx)("p",{children:o})]})}xe.prototype={file:ve.a.object,filename:ve.a.string,url:ve.a.string,dataURL:ve.a.string};var ye=function(){function e(t){Object(i.a)(this,e),this.message_api=t,this.client=t.get_client(),this.username=t.get_username(),this.roomname=t.get_roomname(),this.user=t.get_user()}return Object(c.a)(e,[{key:"handle_message",value:function(e){var t=this;this.client.onmessage=function(n){var a,s,o,i=JSON.parse(n.data);if("messages"===i.type){var c={selector:e,currentRoom:t.roomname,currentUser:t.user,messages:i.messages};t.username===i.username&&function(e){var t=e.selector,n=e.messages,a=e.currentUser,s=e.currentRoom,o=document.getElementById(t);if(o){for(var r=0;r<n.length;r++){var i=n[r];toString(s)===toString(i.room)&&(i.user.id===a.id?L(t,i,a.name):C(t,i,i.user.name))}o.scrollTop=o.scrollHeight}else alert("container for holding messages doesn't exists")}(c)}else if("new_message"===i.type){if(console.log(i),0==i.status)return void se({title:"Posted Data Not Sufficient",content:JSON.stringify(i.error),color:"red",time:5});document.hasFocus()||function(e,t,n){if("granted"!=Notification.permission)Notification.requestPermission();else{var a=new Notification("Awesome Chatroom:\n".concat(t,"<--").concat(e),{body:n,icon:"https://i.pinimg.com/originals/87/68/a6/8768a6b1df27243034f123988cfdb9d1.jpg"});a.onclick=function(){a.close(),window.parent.focus()}}}(i.username,i.roomname,i.message);var l=i.data;l.user.id===t.user.id?L(e,l,t.user.name):C(e,l,l.user.name),function(e){var t=document.querySelector("#"+e),n=t.scrollTop+t.clientHeight,a=t.scrollHeight-n;a<2*t.clientHeight&&(t.scrollTop=t.scrollHeight),console.log("current Height: ",n),console.log("below Height: ",a)}("message_box")}else if("updated_message"===i.type){!function(e){var t="message_"+e.id,n=document.getElementById(t);null!=n?n.innerText=e.message:alert("message not exists")}(i)}else if("clear_room_messages"==i.type)1==i.status?(f()("#"+e).empty(),alert(i.message)):0==i.status&&alert(i.message);else if("new_file"===i.type){var d=document.getElementById(e),u=document.createElement("div");d.appendChild(u),["jpg","JPG","png","PNG","jpeg","JPEG"].indexOf(i.extension)>0?(u.className="chatbox_image_container",u.id="image_container_"+i.id,r.a.render(Object(N.jsx)(_e,{id:i.id,src:i.dataURL,message_api:t.message_api}),u)):(u.className="file_container",u.id="file_container_"+i.id,r.a.render(Object(N.jsx)(xe,{id:i.id,dataURL:i.dataURL,filename:i.filename}),u))}else"active_users"==i.type?(document.getElementById("active_user_container").innerText="",i.users.map((function(e){f()("#active_user_container").append("<li>".concat(e.name,"</li>")),console.log("<li>".concat(e.name,"</li>"))}))):"image_answer"==i.type&&f()("#"+i.id).parent().append("<p> ".concat(i.message," </p>"));a=t.message_api,s=t.username,o=t.roomname,a.get_client(),f()(".copy_message_button").unbind("click").bind("click",(function(e){return I(e.target.parentElement.innerText),window.confirm("Copied Successfully"),!1})),f()(".copy_message_button").unbind("click").bind("click",(function(e){return I(e.target.parentElement.innerText),window.confirm("Copied Successfully"),!1})),f()(".google_search_button").unbind("click").bind("click",(function(e){var t="http://www.google.com/search?q="+e.target.value;window.open(t,"_blank")})),f()(".right_message").unbind("click").bind("click",(function(){var e=prompt("Enter Answer : ");if(null!==e&&""!==e){var t=this.innerText+"\nAnswer: "+e,n=this.innerText;a.update_message({command:"update_message",current_message:n,updated_message:t,id:this.id,username:s,roomname:o})}})),f()(".left_message").unbind("click").bind("click",(function(e){var t=prompt("Enter Answer : ");if(null!==t&&""!==t){var n=this.innerText+"\nAnswer: "+t,r=this.innerText;a.update_message({command:"update_message",current_message:r,updated_message:n,id:this.id,username:s,roomname:o})}}))}}}]),e}(),we=(n(334),n(335),n(368)),Ne=n(81),Se=function(e){return new Promise((function(t,n){var a=new Image;a.addEventListener("load",(function(){return t(a)})),a.addEventListener("error",(function(e){return n(e)})),a.setAttribute("crossOrigin","anonymous"),a.src=e}))};function ke(e){return e*Math.PI/180}function Ce(){return(Ce=Object(j.a)(h.a.mark((function e(t,n){var a,s,o,r,i,c,l,d=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>2&&void 0!==d[2]?d[2]:0,e.next=3,Se(t);case 3:return s=e.sent,o=document.createElement("canvas"),r=o.getContext("2d"),i=Math.max(s.width,s.height),c=i/2*Math.sqrt(2)*2,o.width=c,o.height=c,r.translate(c/2,c/2),r.rotate(ke(a)),r.translate(-c/2,-c/2),r.drawImage(s,c/2-.5*s.width,c/2-.5*s.height),l=r.getImageData(0,0,c,c),o.width=n.width,o.height=n.height,r.putImageData(l,Math.round(0-c/2+.5*s.width-n.x),Math.round(0-c/2+.5*s.height-n.y)),e.abrupt("return",new Promise((function(e){o.toBlob((function(t){console.log(t),e(URL.createObjectURL(t))}),"image/jpeg")})));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){var t=e.image,n=e.messageApi,s=e.self,o=Object(a.useState)(!1),i=Object(m.a)(o,2),c=i[0],l=i[1],d=Object(a.useState)(50),u=Object(m.a)(d,2),p=u[0],h=u[1],j=Object(a.useState)(50),b=Object(m.a)(j,2),g=b[0],_=b[1],f=Object(a.useState)(50),v=Object(m.a)(f,2),O=v[0],x=v[1],y=Object(a.useState)(0),w=Object(m.a)(y,2),S=w[0],k=w[1],C=Object(a.useState)(0),L=Object(m.a)(C,2),I=L[0],E=L[1],U=Object(a.useState)(0),R=Object(m.a)(U,2),F=R[0],T=R[1],D=Object(a.useState)(null),P=Object(m.a)(D,2),A=P[0],M=P[1],B=Object(a.useState)(!1),q=Object(m.a)(B,2),H=q[0],G=q[1],J=Object(a.useState)(null),W=Object(m.a)(J,2),Y=W[0],Q=W[1],V=Object(a.useState)({x:0,y:0}),X=Object(m.a)(V,2),Z=X[0],K=X[1],$=Object(a.useState)(1),ee=Object(m.a)($,2),te=ee[0],ne=ee[1];var ae=function(e){e.saturation&&h(e.saturation),e.brightness&&_(e.brightness),e.grayscale&&k(e.grayscale),e.sepia&&E(e.sepia),e.invert&&T(1==F?0:1),e.contrast&&x(e.contrast);var t=document.getElementById("photoshop_img"),n="saturate(".concat(p+50,"%) brightness(").concat(g+50,"%) grayscale(").concat(S,"%) sepia(").concat(I,"%) invert(").concat(F,") contrast(").concat(O+60,"%)"),a=document.getElementById("photoshop_canvas_container"),s=document.createElement("canvas");s.id="photoshop_canvas",s.width=t.width,s.height=t.height;var o=s.getContext("2d");o.filter=n,o.drawImage(t,0,0,s.width,s.height),a.innerHTML=null,a.append(s)};function se(){document.getElementById("root").classList.remove("blur"),r.a.unmountComponentAtNode(s),document.getElementById("photoshop_canvas")&&r.a.unmountComponentAtNode(document.getElementById("photoshop_canvas_container")),s.remove()}return Object(a.useEffect)((function(){null===A&&function(e){var t=new FileReader;t.onload=function(){M(t.result)},t.readAsDataURL(e)}(t),H||ae({})}),[p,g,I,S,F]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("h2",{align:"center",children:["PhotoShop (Developer Shivansh Shrivastava)",Object(N.jsx)("span",{children:Object(N.jsx)("input",{type:"button",value:"Close Photoshop",onClick:se})})]}),Object(N.jsxs)("div",{className:"photoshop_container",children:[Object(N.jsxs)("div",{className:"photoshop_sliders",children:[Object(N.jsxs)("div",{className:"saturation_slider",children:[Object(N.jsx)("h4",{children:"Saturation"}),Object(N.jsx)(we.a,{value:p,onChange:function(e,t){ae({saturation:t})},color:"secondary",valueLabelDisplay:"auto"})]}),Object(N.jsxs)("div",{className:"brightness_slider",children:[Object(N.jsx)("h4",{children:"Brightness"}),Object(N.jsx)(we.a,{value:g,onChange:function(e,t){ae({brightness:t})},color:"secondary",valueLabelDisplay:"auto"})]}),Object(N.jsxs)("div",{className:"contrast_slider",children:[Object(N.jsx)("h4",{children:"Contrast"}),Object(N.jsx)(we.a,{value:O,onChange:function(e,t){ae({contrast:t})},color:"secondary",valueLabelDisplay:"auto"})]}),Object(N.jsxs)("div",{className:"grayscale_slider",children:[Object(N.jsx)("h4",{children:"GrayScale"}),Object(N.jsx)(we.a,{value:S,onChange:function(e,t){ae({grayscale:t})},color:"secondary",valueLabelDisplay:"auto"})]}),Object(N.jsxs)("div",{className:"sepia_slider",children:[Object(N.jsx)("h4",{children:"Sepia"}),Object(N.jsx)(we.a,{value:I,onChange:function(e,t){ae({sepia:t})},color:"secondary",valueLabelDisplay:"auto"})]})]}),Object(N.jsxs)("div",{className:"photoshop_main",children:[Object(N.jsxs)("div",{className:"photoshop_image_container",children:[Object(N.jsx)("div",{className:"img_div",children:Object(N.jsx)("img",{id:"photoshop_img",src:A,style:{display:"none"}})}),H?Object(N.jsxs)("div",{className:"image_crop_container",children:[Object(N.jsx)(Ne.a,{image:A,crop:Z,zoom:te,aspect:1,onCropChange:K,onZoomChange:ne,onCropComplete:function(e,t){Q(t)}}),Object(N.jsxs)("div",{className:"crop_buttons",children:[Object(N.jsx)("button",{onClick:function(){(function(e,t){return Ce.apply(this,arguments)})(A,Y).then((function(e){M(e),G(!1)}))},children:"Crop Image"}),Object(N.jsx)("button",{onClick:function(){return G(!1)},children:"Cancel"})]})]}):Object(N.jsx)("div",{id:"photoshop_canvas_container",children:" "})]}),Object(N.jsxs)("div",{className:"photoshop_button_container",children:[Object(N.jsxs)("div",{className:"image_manipulaion_button",children:[Object(N.jsx)("button",{onClick:function(){return ae({invert:!0})},children:" Invert Image "}),Object(N.jsx)("button",{onClick:function(){return G(!0)},children:" Crop Image "})]}),Object(N.jsx)("button",{onClick:function(){l(!0);var e=function(e,t){for(var n=e.split(","),a=n[0].match(/:(.*?);/)[1],s=atob(n[1]),o=s.length,r=new Uint8Array(o);o--;)r[o]=s.charCodeAt(o);return new File([r],t,{type:a})}(document.getElementById("photoshop_canvas").toDataURL("image/jpeg"),"photoshoped_image");n.send_file_to_group(e,"description here",(function(e){1==e?(l(!1),se()):l("false")}))},children:" Send Image "})]}),c?Object(N.jsxs)("div",{className:"flex_center_column",children:[Object(N.jsx)(z.a,{size:40}),Object(N.jsx)("h4",{children:"Sending Image"})]}):null]})]})]})}var Ie=n(79),Ee=n.n(Ie);function Ue(e){var t=e.file,n=e.self,s=t.name.split(".").pop(),o=Object(a.useState)(!1),i=Object(m.a)(o,2),c=i[0],l=i[1],d=Object(a.useState)(null),u=Object(m.a)(d,2),p=u[0],h=u[1];return Object(a.useEffect)((function(){l(!0),D(t,(function(e){h(Object(N.jsx)("div",{className:"absolute_center",style:{height:"100%",width:"80%"},children:Object(N.jsx)(Ee.a,{fileType:s,filePath:e})})),l(!1)}))}),[t]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"cancel_button",onClick:function(){r.a.unmountComponentAtNode(n),n.remove()},children:Object(N.jsx)(W.a,{})}),c?Object(N.jsx)(H,{boxName:"loader",hidden:!1}):p]})}var Re=function(e){var t=document.getElementById("root"),n=e.message_api,s=e.file,o=e.self,i=Object(a.useState)(0),c=Object(m.a)(i,2),l=c[0],d=c[1],u=Object(a.useState)(""),p=Object(m.a)(u,2),h=p[0],j=p[1],b=Object(a.useState)(!1),g=Object(m.a)(b,2),_=g[0],f=g[1];function v(e){t.classList.remove("blur"),r.a.unmountComponentAtNode(o),o.remove()}function O(){return!!s.type.startsWith("image")}return _?Object(N.jsxs)(N.Fragment,{children:[t.classList.remove("blur"),Object(N.jsxs)("div",{className:"upload_progress_container",children:[Object(N.jsx)("h3",{align:"center",children:h}),Object(N.jsx)(Oe.a,{variant:"determinate",value:l})]})]}):Object(N.jsxs)(N.Fragment,{children:[t.classList.add("blur"),Object(N.jsx)("div",{className:"popup_file__header",children:Object(N.jsx)("h2",{align:"center",children:"File Upload"})}),Object(N.jsx)("div",{className:"popup_file__main",children:Object(N.jsxs)("form",{className:"popup_file__form",onSubmit:function(e){var t,a;if(e.preventDefault(),O()&&(t=e.target.ct.checked),a=e.target.du.checked,t&&a)alert("you can't tick both");else if(t)j("Converting To Text"),f(!0),n.send_image_text(s,(function(e){d(e)}),(function(e){!0===e?(se({title:"Image",content:"Image To Text Conversion Successful",color:"green",time:4}),v()):(se({title:"Image",content:"Image To Text Conversion Failed",color:"red",time:4}),v()),f(!1)}));else{if(!a)return void alert("please check atleast one option");f(!0),j("Sending File Please Wait"),n.send_file_to_group(s,"here is the description",(function(e){f(!1),v()}))}},children:[O()?Object(N.jsxs)("div",{children:[Object(N.jsx)("input",{id:"convert_to_text",name:"ct",type:"checkbox"}),Object(N.jsx)("label",{htmlFor:"convert_to_text",children:"Convert To Text"})]}):null,Object(N.jsxs)("div",{children:[Object(N.jsx)("input",{id:"direct_upload",name:"du",type:"checkbox"}),Object(N.jsx)("label",{htmlFor:"direct_upload",children:"Direct Upload"})]}),Object(N.jsx)("input",{type:"button",value:"View File",onClick:function(){var e=document.createElement("div");e.className="file_view_container absolute_center",e.id="file_view_id",document.body.append(e),r.a.render(Object(N.jsx)(Ue,{self:e,file:s}),e)}}),Object(N.jsx)("input",{type:"submit",value:"Upload"}),O()?Object(N.jsx)("input",{type:"button",value:"Open Photoshop",onClick:function(){r.a.unmountComponentAtNode(o),o.classList.remove("popup_file__container"),o.classList.add("photoshop"),r.a.render(Object(N.jsx)(Le,{image:s,messageApi:n,self:o}),o)}}):null,Object(N.jsx)("input",{type:"button",value:"cancel",onClick:v})]})})]})};function Fe(e){Object(B.c)();var t,n,s=Object(B.d)((function(e){return e.userData})),o=Object(B.d)((function(e){return e.roomState})),i=Object(a.useRef)(null),c=Object(a.useState)(""),l=Object(m.a)(c,2),d=l[0],u=l[1],p=Object(a.useState)(!1),b=Object(m.a)(p,2),g=b[0],_=b[1],f=Object(a.useState)(!1),v=Object(m.a)(f,2),O=v[0],x=v[1],y=Object(a.useState)(null),w=Object(m.a)(y,2),S=w[0],k=w[1],C=Object(a.useRef)(null);function L(){return(L=Object(j.a)(h.a.mark((function e(a){var o,r=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.length>1&&void 0!==r[1]&&r[1],e.abrupt("return",new Promise((function(e,r){S&&S.close_connection(),(n=1==o?new WebSocket(T+"group/"+a+"/?"+"username=".concat(s.username,"&password=").concat(s.password)):new WebSocket(T+"chat/"+a+"/?"+"username=".concat(s.username,"&password=").concat(s.password))).onopen=function(){(t=new M(n)).set_username(s.username),t.set_password(s.password),t.set_roomname(a),t.set_user(s.user),1==o&&t.set_is_group(!0),new ye(t).handle_message("message_box"),e(t)},n.onclose=function(){r("connection closed")}})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){if(o.currentRoom){C.current&&(C.current.innerText="");var e=o.currentRoom;if(x(!0),e!=d){_(!0);var t,n=!1;e.startsWith("room_")&&(t=e.substring(5,e.length)),e.startsWith("group_")&&(t=e.substring(6,e.length),n=!0),function(e){return L.apply(this,arguments)}(t,n).then((function(t){k(t),u(e),_(!1),t.fetch_messages(),function(e,t,n){P.apply(this,arguments)}("message_box","input_room_file",(function(e,n){var a=document.createElement("div");a.classList.add("absolute_center"),a.classList.add("popup_file__container"),document.body.append(a),r.a.render(Object(N.jsx)(Re,{message_api:t,file:n,self:a}),a)}))})).catch((function(e){_(!1)}))}}}),[o]),O&&!g?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{id:"message_box",ref:C,className:"roomcontainer__room__messagebox"}),Object(N.jsxs)("div",{className:"roomcontainer__room__inputs",children:[Object(N.jsx)("textarea",{id:"input_message",className:"room_input",type:"text",placeholder:"Enter Your Message Here : "}),Object(N.jsx)("button",{id:"send_message_button",className:"room_input",type:"submit",onClick:function(e){var t=document.getElementById("input_message").value;S.send_message_to_room("new_message",t),document.getElementById("input_message").value=""},children:"Send Message"}),Object(N.jsx)("input",{ref:i,id:"input_room_file",className:"room_input",type:"file",hidden:!0,onChange:function(e){return function(e){var t=document.createElement("div");t.classList.add("absolute_center"),t.classList.add("popup_file__container"),document.body.append(t),r.a.render(Object(N.jsx)(Re,{message_api:S,file:e,self:t}),t)}(e.target.files[0])}}),Object(N.jsx)("label",{htmlFor:"input_room_file",children:"Upload File"})]})]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"roomcontainer__room__messagebox flex_center_column",children:O||g?g?Object(N.jsxs)("div",{className:"flex_center_column",children:[Object(N.jsx)(z.a,{size:70}),Object(N.jsx)("h2",{style:{color:"white"},children:"Connecting To Room"})]}):null:Object(N.jsx)("h1",{align:"center",style:{color:"white"},children:"Please Select Any Room To Connect."})}),Object(N.jsxs)("div",{className:"roomcontainer__room__inputs",children:[Object(N.jsx)("textarea",{id:"input_message",className:"room_input",type:"text",placeholder:"Enter Your Message Here : "}),Object(N.jsx)("button",{id:"send_message_button",className:"room_input",type:"submit",children:"Send Message"})]})]})}var Te=Object(B.b)((function(e){return{roomState:e.changeRoom}}))((function(e){var t=e.username,n=e.password,s=new A(t,n),o=Object(B.c)(),r=Object(a.useState)(!1),i=Object(m.a)(r,2),c=i[0],l=i[1],d=Object(B.d)((function(e){return e.roomNavState})),u=Object(B.d)((function(e){return e.roomState})),p=Object(le.useMediaQuery)({query:"(max-width: 600px)"});Object(a.useEffect)((function(){o({type:"UpdateLoading",payload:!0}),o(function(e){return{type:"UpdateUsername",payload:e}}(t)),o(function(e){return{type:"UpdatePassword",payload:e}}(n)),s.setMethod("post"),s.makeRequest("/api/chat/command/get_saved_rooms/").then((function(e){var t=e.data;1==t.status?o(V(t.data)):(localStorage.removeItem("username"),localStorage.removeItem("password"),o(Q(!1)))})).catch((function(e){o(function(e){return{type:"UpdateError",payload:e}}(e.message))})),s.setMethod("get"),s.makeRequest("/api/chat/user/").then((function(e){o(X(e.data)),o(Q(!1))}))}),[]),Object(a.useEffect)((function(){u.currentRoom&&l(!1)}),[u]);var h=null;return h=p?c?Object(N.jsx)("div",{id:"room_navigation",className:"roomcontainer__list layout",children:Object(N.jsx)(ue,{})}):null:Object(N.jsx)("div",{id:"room_navigation",className:"roomcontainer__list layout",children:Object(N.jsx)(ue,{})}),0==d.loading?Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{className:"roomcontainer",children:[h,Object(N.jsxs)("div",{className:"roomcontainer__room layout",children:[Object(N.jsxs)("div",{className:"roomheader",children:[p?Object(N.jsx)("div",{className:"roomheader__menu_icon",onClick:function(e){l(!c)},children:Object(N.jsx)(q.b,{size:40})}):null,Object(N.jsxs)("div",{className:"roomheader__content",children:[Object(N.jsx)("h2",{align:"center",children:"Welcome To Chatroom"}),Object(N.jsx)("p",{children:"Developer Shivansh Shrivastava"})]})]}),Object(N.jsx)(Fe,{})]})]})}):Object(N.jsx)(H,{boxName:"loader",hidden:!1})})),De=n(34),Pe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={loadingImages:!1,isLoggedIn:!1,username:"",roomname:"",password:"",isLoading:!1,isError:!1,errorMessage:""},a.handlePassword=a.handlePassword.bind(Object(l.a)(a)),a.handleUsername=a.handleUsername.bind(Object(l.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(l.a)(a)),a.tryLocalLogin=a.tryLocalLogin.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"tryLocalLogin",value:function(){var e=localStorage.getItem("username"),t=localStorage.getItem("password"),n=this;e&&t?g()({method:"POST",url:F+"/api/chat/user/login/",headers:{"Content-Type":"application/json","X-CSRFToken":k("csrftoken")},data:{username:e,password:t}}).then((function(a){var s=a.data;1==s.status?(n.setState({username:e,password:t}),n.setState({isError:!1}),n.setState({isLoading:!1}),n.setState({isLoggedIn:!0}),n.setState({loadingImages:!1})):(alert("failed"),localStorage.removeItem("username"),localStorage.removeItem("password"),n.setState({isError:s.error}),n.setState({isLoading:!1}),n.setState({isLoggedIn:!1}),n.setState({loadingImages:!1}))})).catch((function(e){localStorage.removeItem("username"),localStorage.removeItem("password"),n.setState({isLoggedIn:!1,loadingImages:!1,isLoading:!1}),alert(e.message)})):n.setState({isLoggedIn:!1,loadingImages:!1,isLoading:!1})}},{key:"componentDidMount",value:function(){var e=this;e.setState({loadingImages:!0}),function(e,t){var n=new Image;n.onload=function(){t(e)},n.src=e}("http://static.demilked.com/wp-content/uploads/2016/06/gif-animations-replace-loading-screen-10.gif",(function(t){document.getElementById("root").style.backgroundImage="url(".concat(t,")"),e.tryLocalLogin(e)}))}},{key:"handleSubmit",value:function(e){var t=this.state.username,n=this.state.password;if(""!=t&&""!=n){var a=this;g()({method:"POST",url:F+"/api/chat/user/login/",headers:{"Content-Type":"application/json","X-CSRFToken":k("csrftoken")},data:{username:t,password:n}}).then((function(e){var s=e.data;!0===s.status?(localStorage.setItem("username",t),localStorage.setItem("password",n),a.setState({isLoading:!1,isLoggedIn:!0,isError:!1})):a.setState({loadingImages:!1,isLoading:!1,isLoggedIn:!1,isError:!0,errorMessage:s.error})})).catch((function(e){console.log(e.message),a.setState({isLoading:!1,isLoggedIn:!1})}))}else alert("You can't leave any field empty");e.preventDefault()}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"render",value:function(){var e=this;return!1!==this.state.isLoggedIn||this.state.loadingImages?this.state.loadingImages?Object(N.jsx)("img",{src:"/static/media/loader1.gif",style:{width:"100%",height:"100%"}}):Object(N.jsx)(Te,{username:this.state.username,password:this.state.password}):Object(N.jsxs)("div",{className:"RoomContainer",children:[this.state.isError?Object(N.jsx)(H,{boxName:"error_box",error_message:this.state.errorMessage,hidden:!1}):Object(N.jsx)(H,{boxName:"error_box",hidden:!0}),Object(N.jsx)("h2",{children:"Login To The Chatroom"}),Object(N.jsxs)("form",{className:"RoomForm",onSubmit:this.handleSubmit,children:[Object(N.jsx)("p",{className:"intro",children:"Created By Shivansh Shrivastava"}),Object(N.jsx)("label",{htmlFor:"",children:"Enter Username: "}),Object(N.jsx)("input",{className:"input-username",ref:function(t){return e.searchInput=t},type:"text",onChange:this.handleUsername,value:this.state.username}),Object(N.jsx)("label",{htmlFor:"",children:"Enter Password: "}),Object(N.jsx)("input",{className:"input-room-name",type:"password",onChange:this.handlePassword,value:this.state.password}),Object(N.jsxs)("div",{children:[Object(N.jsx)("input",{className:"input-submit",type:"submit",value:"Login"}),Object(N.jsx)(De.b,{to:"/signup/",children:Object(N.jsx)("input",{className:"input-submit",type:"submit",value:"Go To Signup"})})]}),Object(N.jsx)("div",{children:this.state.isLoading?Object(N.jsx)(z.a,{}):null})]})]})}}]),n}(s.a.Component);function Ae(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],s=t[1],o=Object(a.useState)(""),r=Object(m.a)(o,2),i=r[0],c=r[1],l=Object(a.useState)(""),d=Object(m.a)(l,2),u=d[0],p=d[1],h=Object(a.useState)(!1),j=Object(m.a)(h,2),b=j[0],_=j[1],f=Object(a.useState)(null),v=Object(m.a)(f,2),O=v[0],x=v[1];return Object(N.jsxs)("div",{className:"RoomContainer",children:[O?Object(N.jsx)(H,{boxName:"error_box",hidden:!1,error_message:O}):Object(N.jsx)(H,{boxName:"error_box",hidden:!0,error_message:O}),Object(N.jsx)("h2",{children:"Chatroom Signup"}),Object(N.jsxs)("form",{className:"RoomForm",onSubmit:function(e){_(!0),""!=n&&""!=i?i==u?g()({method:"POST",headers:{"Content-Type":"application/json"},url:F+"/api/chat/user/signup/",data:{username:n,password:i}}).then((function(e){var t=e.data;1==t.status?(x(null),_(!1),s(""),c(""),p(""),se({title:"Room",content:"Login Successful",color:"green",time:15})):(_(!1),x(t.error))})):(x("Password Not Matched"),_(!1)):(_(!1),se({title:"Room",content:"Username or Password Not Provided",color:"red",time:5})),e.preventDefault()},children:[Object(N.jsx)("p",{className:"intro",children:"Created By Shivansh Shrivastava"}),Object(N.jsx)("label",{htmlFor:"",children:"Username: "}),Object(N.jsx)("input",{className:"input-username",type:"text",onChange:function(e){return s(e.target.value)},value:n}),Object(N.jsx)("label",{htmlFor:"",children:"Password: "}),Object(N.jsx)("input",{className:"input-room-name",type:"password",onChange:function(e){return c(e.target.value)},value:i}),Object(N.jsx)("label",{htmlFor:"",children:"Confirm Password: "}),Object(N.jsx)("input",{className:"input-room-name",type:"password",onChange:function(e){return p(e.target.value)},value:u}),Object(N.jsxs)("div",{children:[Object(N.jsx)("input",{className:"input-submit",type:"submit",value:"Signup"}),Object(N.jsx)(De.b,{to:"/",children:Object(N.jsx)("input",{className:"input-submit",type:"button",value:"Go To Login"})}),b?Object(N.jsx)(z.a,{}):null]})]})]})}n(341),n(342);var Me=n(10);var Be=function(){return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(B.a,{store:ae,children:Object(N.jsx)(De.a,{children:Object(N.jsxs)(Me.c,{children:[Object(N.jsx)(Me.a,{path:"/signup/",component:Ae}),Object(N.jsx)(Me.a,{path:"/",component:Pe})]})})})})},qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,370)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),o(e),r(e)}))};r.a.render(Object(N.jsx)(s.a.StrictMode,{children:Object(N.jsx)(Be,{})}),document.getElementById("root")),qe()},90:function(e,t,n){}},[[343,1,2]]]);
//# sourceMappingURL=main.137fd4bd.chunk.js.map